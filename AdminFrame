import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;
import java.util.List;

class AdminFrame extends JFrame {
    public AdminFrame() {
        setTitle("Admin Dashboard");
        setSize(600, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        JPanel panel = new JPanel(new GridLayout(0, 1, 10, 10));
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        // Add Theatre
        JButton addTheatreButton = new JButton("Add Theatre");
        addTheatreButton.addActionListener(e -> {
            String theatreName = JOptionPane.showInputDialog("Enter Theatre Name:");
            if (theatreName != null && !theatreName.isEmpty() && !MovieTicketBooking.theatres.contains(theatreName)) {
                MovieTicketBooking.theatres.add(theatreName);
                MovieTicketBooking.movies.put(theatreName, new ArrayList<>());
                MovieTicketBooking.timings.put(theatreName, new ArrayList<>());
                MovieTicketBooking.availableSeats.put(theatreName, 0); // Default, can be set later
                MovieTicketBooking.seatCosts.put(theatreName, 0.0); // Default, can be set later
                MovieTicketBooking.bookings.put(theatreName, new ArrayList<>());
                JOptionPane.showMessageDialog(this, "Theatre added: " + theatreName);
            } else {
                JOptionPane.showMessageDialog(this, "Theatre name invalid or already exists");
            }
        });
        panel.add(addTheatreButton);

        // Change movies
        JButton changeMoviesButton = new JButton("Change Movies");
        changeMoviesButton.addActionListener(e -> {
            String theatre = (String) JOptionPane.showInputDialog(this, "Select Theatre:", "Theatre", JOptionPane.QUESTION_MESSAGE, null, MovieTicketBooking.theatres.toArray(), null);
            if (theatre == null) return;
            String newMovies = JOptionPane.showInputDialog("Enter new movies (comma separated):");
            MovieTicketBooking.movies.put(theatre, new ArrayList<>(List.of(newMovies.split(","))));
            JOptionPane.showMessageDialog(this, "Movies updated for " + theatre);
        });
        panel.add(changeMoviesButton);

        // Change timings
        JButton changeTimingsButton = new JButton("Change Timings");
        changeTimingsButton.addActionListener(e -> {
            String theatre = (String) JOptionPane.showInputDialog(this, "Select Theatre:", "Theatre", JOptionPane.QUESTION_MESSAGE, null, MovieTicketBooking.theatres.toArray(), null);
            if (theatre == null) return;
            String newTimings = JOptionPane.showInputDialog("Enter new timings (comma separated):");
            MovieTicketBooking.timings.put(theatre, new ArrayList<>(List.of(newTimings.split(","))));
            JOptionPane.showMessageDialog(this, "Timings updated for " + theatre);
        });
        panel.add(changeTimingsButton);

        // Set seat costs
        JButton setCostsButton = new JButton("Set Seat Costs");
        setCostsButton.addActionListener(e -> {
            String theatre = (String) JOptionPane.showInputDialog(this, "Select Theatre:", "Theatre", JOptionPane.QUESTION_MESSAGE, null, MovieTicketBooking.theatres.toArray(), null);
            if (theatre == null) return;
            String costStr = JOptionPane.showInputDialog("Enter cost per seat:");
            double cost = Double.parseDouble(costStr);
            MovieTicketBooking.seatCosts.put(theatre, cost);
            JOptionPane.showMessageDialog(this, "Cost updated for " + theatre);
        });
        panel.add(setCostsButton);

        // Set available seats
        JButton setSeatsButton = new JButton("Set Available Seats");
        setSeatsButton.addActionListener(e -> {
            String theatre = (String) JOptionPane.showInputDialog(this, "Select Theatre:", "Theatre", JOptionPane.QUESTION_MESSAGE, null, MovieTicketBooking.theatres.toArray(), null);
            if (theatre == null) return;
            String seatsStr = JOptionPane.showInputDialog("Enter available seats:");
            int seats = Integer.parseInt(seatsStr);
            MovieTicketBooking.availableSeats.put(theatre, seats);
            JOptionPane.showMessageDialog(this, "Seats updated for " + theatre);
        });
        panel.add(setSeatsButton);

        // View bookings
        JButton viewBookingsButton = new JButton("View Bookings");
        viewBookingsButton.addActionListener(e -> {
            StringBuilder sb = new StringBuilder();
            for (String theatre : MovieTicketBooking.theatres) {
                sb.append("Theatre: ").append(theatre).append("\n");
                for (String booking : MovieTicketBooking.bookings.get(theatre)) {
                    sb.append(booking).append("\n");
                }
                sb.append("\n");
            }
            JOptionPane.showMessageDialog(this, sb.toString());
        });
        panel.add(viewBookingsButton);

        JButton backButton = new JButton("Back");
        backButton.addActionListener(e -> {
            new LoginFrame();
            dispose();
        });
        panel.add(backButton);

        add(new JScrollPane(panel), BorderLayout.CENTER);
        setVisible(true);
    }
}
